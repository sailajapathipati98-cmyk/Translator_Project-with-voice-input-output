<!DOCTYPE html>
<html>
<head>
<title>AI Smart Translator</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
background: linear-gradient(135deg,#4e54c8,#8f94fb);
padding:40px;
color:white;
}

.card {
border-radius:20px;
box-shadow:0px 10px 25px rgba(0,0,0,0.3);
}

textarea {
height:160px;
}

.btn {
border-radius:25px;
}
</style>
</head>

<body>

<div class="container">
<div class="card p-4">

<h2 class="text-center text-dark mb-3">ğŸŒ  Language Translator</h2>

<div class="row">

<div class="col-md-6">
<label class="text-dark">Source Text</label>
<textarea id="input" class="form-control"></textarea>
</div>

<div class="col-md-6">
<label class="text-dark">Translated Text</label>
<textarea id="output" class="form-control"></textarea>
</div>

</div>

<div class="row mt-3">

<div class="col">
<select id="source" class="form-select">
{% for code,name in languages.items() %}
<option value="{{code}}">{{name}}</option>
{% endfor %}
</select>
</div>

<div class="col">
<select id="target" class="form-select">
{% for code,name in languages.items() %}
<option value="{{code}}">{{name}}</option>
{% endfor %}
</select>
</div>

</div>

<div class="text-center mt-4">

<button class="btn btn-primary" onclick="translateText()">Translate</button>
<button class="btn btn-warning" onclick="speak()">ğŸ”Š Speak</button>
<button class="btn btn-success" onclick="voice()">ğŸ¤ Voice Input</button>

</div>

</div>
</div>

<script>

function translateText(){
fetch("/translate",{
method:"POST",
headers:{"Content-Type":"application/x-www-form-urlencoded"},
body:new URLSearchParams({
text:input.value,
source:source.value,
target:target.value
})
})
.then(r=>r.json())
.then(d=>output.value=d.translated)
}

function speak(){
fetch("/speak",{
method:"POST",
headers:{"Content-Type":"application/x-www-form-urlencoded"},
body:new URLSearchParams({
text:output.value,
lang:target.value
})
})
.then(r=>r.blob())
.then(b=>{
new Audio(URL.createObjectURL(b)).play()
})
}

function voice(){
fetch("/voice")
.then(r=>r.json())
.then(d=>input.value=d.text)
}

</script>

</body>
</html>
